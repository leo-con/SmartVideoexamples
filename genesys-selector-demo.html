<!DOCTYPE html> 
<html>
   <head>
      <title>Genesys Selector Demo</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
      <meta http-equiv="Pragma" content="no-cache" />
      <meta http-equiv="Expires" content="0" />
      <script type="text/javascript" 	src="https://code.jquery.com/jquery-3.5.0.js"></script>	
      <script type="text/javascript"  src = '/videoengager/js/videoengager.widget.js'></script>
      <script>

                  if (!window._genesys) window._genesys = {};
                  if (!window._gt) window._gt = [];
                  window._genesys.widgets = {
                        main: {
                              debug: true,
                              theme: "dark",
                              plugins: [
                              "cx-webchat",
                              "cx-webchat-service",
                              "cx-cobrowse",
                              "cx-channel-selector",
                              "cx-stats-service",
                              "cx-call-us",
                              "cx-callback-service",
                              "cx-callback",
                              "cx-calendar",
                              "cx-sidebar"
                              ],
                              lang: "en"
                        },
                        videoengager: {
                              //callHolder: "myVideoHolder", 
                              platform: "purecloud", //engage     or purecloud
                              tenantId : "0FphTk091nt7G1W7", 
                              veUrl: "https://videome.leadsecure.com/", 
                              audioOnly: false, 
                              autoAccept: true, 
                              enablePrecall: false,
                              useWebChatForm: true,
                              webChatFormData: {
                                    nickname: 'videoengager',
                                    firstname: 'videoengager.github.io',
                                    lastname: 'leadsecure',
                                    email: 'development@videoengager.com',
                                    subject: 'test',
                                    userData: {}
                              },
                              i18n: { "en": { 
                                          "ChatFormSubmitVideo": "Start Video",
                                          "WebChatTitleVideo": "Video Chat",
                                          "ChatFormSubmitAudio": "Start Audio",
                                          "WebChatTitleAudio": "Audio Chat",
                                           },
                                      "fr": {
                                          "ChatFormSubmitVideo": "Démarrer la vidéo",
                                          "WebChatTitleVideo": "Chat la vidéo",
                                          "ChatFormSubmitAudio": "Démarrer la audio",
                                          "WebChatTitleAudio": "Chat audio",
                                      }
                              },
                   /*           form: {
                                    wrapper: "<table></table>",
            				inputs: [
		            			{ id:"form_firstname", name: "firstname", maxlength: "100", placeholder: "FirstName", label: "FirstName", autofocus: !0, "aria-required": !0 },
				            	{ id:"form_lastname", name: "lastname", maxlength: "100", placeholder: "LastName", label: "LastName", "aria-required": !0 },
					            { id:"form_email", type: "email", name: "email", maxlength: "100", placeholder: "Email", label: "Email", "aria-required": !0 },
					// to add custom fields to web chat
					            { value:"", name: "customField2", maxlength: "100", placeholder: "Cust", label: "Subject" },
					            { value:"Subject", name: "customField2Label", maxlength: "100", placeholder: "", label: !1, style:"display:none" },
            					{ value:"", name: "customField1", maxlength: "100", placeholder: "Test 2", label: "BRAND NEW CUSTOM FIELD" },
		            			{ value:"BRAND NEW CUSTOM FIELD", name: "customField1Label", maxlength: !1, placeholder: !1, label: !1, style:"display:none"},
				]

                              }  */
                        },
                        webchat: {
                              transport: {
                              type: 'purecloud-v2-sockets',
                              dataURL: 'https://api.mypurecloud.com',
                              deploymentKey: '973f8326-c601-40c6-82ce-b87e6dafef1c',
                              orgGuid: 'c4b553c3-ee42-4846-aeb1-f0da3d85058e',
                              interactionData: {
                                    routing: {
                                          targetType: 'QUEUE',
                                          targetAddress: 'TestQueue',
                                          priority: 2
                                    }
                              }

                              }, 
                           /*   form: {
                              wrapper: "<table role='none'>",
                              inputs: [{
                                          id: "cx_sendmessage_form_firstname",
                                          name: "firstname",
                                          maxlength: "100",
                                          placeholder: "@i18n:sendmessage.PlaceholderFirstName",
                                          label: "@i18n:sendmessage.FirstName",
                                          autofocus: !0,
                                          "aria-required": !0
                                    },
                                    {
                                          id: "cx_sendmessage_form_lastname",
                                          name: "lastname",
                                          maxlength: "100",
                                          placeholder: "@i18n:sendmessage.PlaceholderLastName",
                                          label: "@i18n:sendmessage.LastName",
                                          "aria-required": !0
                                    },
                                    {
                                          id: "cx_sendmessage_form_email",
                                          type: "email",
                                          name: "email",
                                          maxlength: "100",
                                          placeholder: "@i18n:sendmessage.PlaceholderEmail",
                                          label: "@i18n:sendmessage.Email",
                                          "aria-required": !0
                                    },
                                    {
                                          id: "cx_sendmessage_form_subject",
                                          name: "subject",
                                          maxlength: "100",
                                          placeholder: "@i18n:sendmessage.PlaceholderSubject",
                                          label: "@i18n:sendmessage.Subject",
                                          "aria-required": !0
                                    },
                                    {
                                          id: "cx_sendmessage_form_messagebody",
                                          type: "textarea",
                                          name: "messagebody",
                                          placeholder: "@i18n:sendmessage.PlaceholderTypetexthere",
                                          label: !1,
                                          "aria-required": !0
                                    },
                                    // to add custom fields to web chat
                                    {
                                          value: "TEST",
                                          id: "cx_webchat_form_customField2",
                                          name: "customField2",
                                          maxlength: "100",
                                          placeholder: "TEST TEST",
                                          label: "TEST"
                                    },
                                    {
                                          value: "Subject",
                                          id: "cx_webchat_form_customFieldLabel2",
                                          name: "customField2Label",
                                          maxlength: "100",
                                          placeholder: "",
                                          label: !1,
                                          style: "display:none"
                                    },
                                    {
                                          value: "TEST",
                                          id: "cx_webchat_form_customField1",
                                          name: "customField1",
                                          maxlength: "100",
                                          placeholder: "Test 2",
                                          label: "Test 2"
                                    },
                                    {
                                          value: "BRAND NEW CUSTOM FIELD",
                                          id: "cx_webchat_form_customFieldLabel1",
                                          name: "customField1Label",
                                          maxlength: !1,
                                          placeholder: !1,
                                          label: !1,
                                          style: "display:none"
                                    },
                                    {
                                          "id": "cx_webchat_form_language",
                                          "name": "language",
                                          "maxlength": "100",
                                          "placeholder": "Optional",
                                          "label": "Language",
                                          "type": "select",
                                          "options": [{
                                          "text": "English",
                                          "value": "[DEV] - English"
                                          }, {
                                          "text": "Bilingual",
                                          "value": "[DEV] - Bilingual"
                                          }]
                                    },
                              ],
                              },
                              */
                              cometD: {
                              enabled: false,

                              },
                              autoInvite: {
                              enabled: true,
                              timeToInviteSeconds: 5,
                              inviteTimeoutSeconds: 30
                              },
                              chatButton: {
                              enabled: false,
                              openDelay: 1000,
                              effectDuration: 300,
                              hideDuringInvite: true
                              },
                              uploadsEnabled: true
                        },
                        channelselector: {
                              ewtRefreshInterval: 10,
                              channels: [{
                                    enable: true,
                                    clickCommand: 'VideoEngager.startVideoEngager',
                                    readyEvent: 'VideoEngager.ready',
                                    displayName: 'Video Chat',
                                    i18n: 'VideoTitle',
                                    icon: 'videochat',
                                    ewt: {
                                          display: true,
                                          queue: 'Omnichannel',
                                          availabilityThresholdMin: 300,
                                          availabilityThresholdMax: 480,
                                          hideChannelWhenThresholdMax: false
                                    },
                              },
                              {
                                    enable: true,
                                    clickCommand: "WebChat.open",
                                    readyEvent: "WebChat.ready",
                                    displayName: "Web Chat",
                                    i10n: "ChatTitle",
                                    icon: "chat",
                                    html: "",
                                    ewt: {
                                          display: true,
                                          queue: "",
                                          availabilityThresholdMin: 300,
                                          availabilityThresholdMax: 3600,
                                          hideChannelWhenThresholdMax: false
                                    },
                              },
                              ]
                        },
                        sidebar: {
                              showOnStartup: true,
                              position: "right",
                              expandOnHover: true,
                              channels: [{
                              name: "ChannelSelector",
                              clickCommand: "ChannelSelector.open",
                              readyEvent: "ChannelSelector.ready",
                              clickOptions: {},
                              displayName: "Live Assistance",
                              displayTitle: "How would you like to get in touch?",
                              icon: "agent"
                              }, ]
                        },
                        extensions: {
                              'VideoEngager': videoEngager.initExtension
                        }
                  };
const urlParams = new URLSearchParams(window.location.search);
const debugMode = urlParams.get('debug');

const parameters = {
      staging: {
        organizationId: '639292ca-14a2-400b-8670-1f545d8aa860',
        deploymentId: '1b4b1124-b51c-4c38-899f-3a90066c76cf',
        videoengagerUrl: 'https://staging.leadsecure.com',
        tennantId: 'oIiTR2XQIkb7p0ub',
        environment: 'https://api.mypurecloud.de',
        queue: 'Support'
      },
      dev: {
        organizationId: '327d10eb-0826-42cd-89b1-353ec67d33f8',
        deploymentId: 'c2eaaa5c-d755-4e51-9136-b5ee86b92af3',
        videoengagerUrl: 'https://dev.videoengager.com',
        tennantId: 'test_tenant',
        environment: 'https://api.mypurecloud.com.au',
        queue: 'video'
      },
      prod: {
        organizationId: 'c4b553c3-ee42-4846-aeb1-f0da3d85058e',
        deploymentId: '973f8326-c601-40c6-82ce-b87e6dafef1c',
        videoengagerUrl: 'https://videome.leadsecure.com',
        tennantId: '3X0eK2gclYkIML92',
        environment: 'https://api.mypurecloud.com',
        queue: 'TestQueue'
      }
    };
    
    // development
    if (debugMode) {
      window._genesys.widgets.videoengager.tenantId = parameters[debugMode].tennantId;
      window._genesys.widgets.videoengager.veUrl = parameters[debugMode].videoengagerUrl;
      window._genesys.widgets.webchat.transport.dataURL = parameters[debugMode].environment;
      window._genesys.widgets.webchat.transport.deploymentKey = parameters[debugMode].deploymentId;
      window._genesys.widgets.webchat.transport.orgGuid = parameters[debugMode].organizationId;
      window._genesys.widgets.webchat.transport.interactionData.routing.targetAddress = parameters[debugMode].queue;
    }
    
      </script>
      <style type="text/css"> body {
         background-image: url(/videoengager/img/ve.svg);
         background-repeat: no-repeat;
         background-size: contain;
         background-attachment: fixed;
         background-position: center;
         } 
      </style>
   </head>
   <body >
      <script type="text/javascript"  src = '/widgets.min.js'></script>
      <link id="genesys-widgets-styles" href="/widgets.min.css" type="text/css" rel="stylesheet"/>
   </body>
</html>